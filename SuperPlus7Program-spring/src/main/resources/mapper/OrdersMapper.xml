<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.etock.java.mapper.OrdersMapper">
  <select id="selectNoDelWithOrder" parameterType="Long" resultType="java.util.Map">
    select distinct  orders.id,orders.count,orders.state,orders.price, goods.name, goods.image_path from goods, orders
    where
      orders.item_id = goods.id and
      orders.del_flag = false and
      goods.del_flag = false and
      orders.user_id = #{id,jdbcType=BIGINT}
  </select>
  <insert id="insertList" parameterType="List">
    insert into orders (user_id, item_id,
    count, price, state,
    notes, del_flag, created_by,
    created_time, update_by, update_time
    )
    values
    <foreach collection="list" index="index" item="order" separator=",">
      (#{order.userId,jdbcType=BIGINT}, #{order.itemId,jdbcType=BIGINT},
      #{order.count,jdbcType=INTEGER}, #{order.price,jdbcType=INTEGER}, #{order.state,jdbcType=VARCHAR},
      #{order.notes,jdbcType=VARCHAR}, #{order.delFlag,jdbcType=BIT}, #{order.createdBy,jdbcType=VARCHAR},
      #{order.createdTime,jdbcType=TIMESTAMP}, #{order.updateBy,jdbcType=VARCHAR}, #{order.updateTime,jdbcType=TIMESTAMP}
      )
    </foreach>

  </insert>
</mapper>